{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Apply for Loan{% endblock %}

{% block content %}
<div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h4 class="text-center">Loan Application</h4>
        <form id="loanForm" method="post" action="{% url 'apply_for_loan' %}">
            {% csrf_token %}
            <!-- Personal Information -->
            <div class="mb-3">
                <label for="full_name" class="form-label">Full Name</label>
                <input type="text" class="form-control" name="full_name" required>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" name="email" required>
            </div>

            <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" name="phone" required>
            </div>

            <!-- Address Information -->
            <div class="mb-3">
                <label for="address" class="form-label">Residential Address</label>
                <input type="text" class="form-control" name="address" required>
            </div>

            <!-- Employment & Income Details -->
            <div class="mb-3">
                <label for="employment_status" class="form-label">Employment Status</label>
                <select class="form-control" name="employment_status" required>
                    <option value="Employed">Employed</option>
                    <option value="Self-Employed">Self-Employed</option>
                    <option value="Unemployed">Unemployed</option>
                    <option value="Student">Student</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="occupation" class="form-label">Occupation/Business</label>
                <input type="text" class="form-control" name="occupation" required>
            </div>


            <!-- Loan Details -->
            <div class="mb-3">
                <label for="amount_requested" class="form-label">Loan Amount Requested</label>
                <input type="number" class="form-control" name="amount_requested" required>
            </div>

            <div class="mb-3">
                <label for="repayment_duration" class="form-label">Repayment Duration</label>
                <select class="form-control" name="repayment_duration" required>
                    <option value="3 months">3 months</option>
                    <option value="6 months">6 months</option>
                    <option value="12 months">12 months</option>
                    <option value="24 months">24 months</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="purpose" class="form-label">Purpose of Loan</label>
                <textarea class="form-control" name="purpose" rows="3" required></textarea>
            </div>

            <!-- Fraud Tracking Fields -->
            <input type="hidden" id="visitor_id" name="visitor_id">
            <input type="hidden" id="extended_metadata" name="extended_metadata">

            <button type="submit" class="btn btn-primary w-100">Submit Application</button>
        </form>
    </div>
</div>
{% endblock %}